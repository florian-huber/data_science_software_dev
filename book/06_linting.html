
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>6. Linting &#8212; Data Science Software Development with Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'book/06_linting';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7. Code Smells" href="06_code_smells.html" />
    <link rel="prev" title="5. Cleaner Code, Better Code" href="05_clean_code.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="cover.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/cover_mini.png" class="logo__image only-light" alt="Data Science Software Development with Python - Home"/>
    <img src="../_static/cover_mini.png" class="logo__image only-dark pst-js-only" alt="Data Science Software Development with Python - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="cover.html">
                    Software Development für Data Scientists (mit Python)
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_introduction.html">1. Einführung</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_shell_scripting.html">2. Shell Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_git_github.html">3. Versionskontrolle mit Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_github.html">4. GitHub</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Clean Code</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="05_clean_code.html">5. Cleaner Code, Better Code</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">6. Linting</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_code_smells.html">7. Code Smells</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_python_software_project.html">8. Python Software Projekt</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Acquisition and First Exploration</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="06_testing.html">9. Code Testing with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_continuous_integration.html">10. Introduction to Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_testing_2.html">11. Code Testing (2)</a></li>





</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">References</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Source Code and Contributions</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="github.html">Source Code on GitHub</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/florian-huber/data_science_software_dev" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/florian-huber/data_science_software_dev/issues/new?title=Issue%20on%20page%20%2Fbook/06_linting.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/book/06_linting.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Linting</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ruff">6.1. Ruff</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-von-ruff">6.1.1. Installation von Ruff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linting-mit-ruff">6.1.2. Linting mit Ruff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#welche-regeln-soll-ruff-uberprufen">6.1.3. Welche Regeln soll Ruff überprüfen?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#konfiguration-von-ruff">6.1.4. Konfiguration von Ruff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ruff-als-formatter">6.1.5. Ruff als Formatter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#weitere-informationen-zu-ruff">6.1.6. Weitere Informationen zu <code class="docutils literal notranslate"><span class="pre">ruff</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#black">6.2. Black</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#anwendung">6.2.1. Anwendung</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mehr-informationen-zu-black">6.2.2. Mehr Informationen zu <code class="docutils literal notranslate"><span class="pre">black</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ausblick-weitere-quellen">6.3. Ausblick &amp; Weitere Quellen</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="linting">
<h1><span class="section-number">6. </span>Linting<a class="headerlink" href="#linting" title="Link to this heading">#</a></h1>
<p><strong>Was ist Linting?</strong>
Linting ist der Prozess des Überprüfens des Quellcodes auf programmatische und stilistische Fehler. Ein “Linter” ist ein Tool, das den Code automatisch überprüft und häufige Fehler oder Abweichungen von Stilrichtlinien meldet. In Python gibt es verschiedene Linter, wobei einige der bekanntesten <code class="docutils literal notranslate"><span class="pre">pylint</span></code>, <code class="docutils literal notranslate"><span class="pre">flake8</span></code>, <code class="docutils literal notranslate"><span class="pre">black</span></code> und <code class="docutils literal notranslate"><span class="pre">ruff</span></code> sind. Insbesondere <code class="docutils literal notranslate"><span class="pre">pylint</span></code> und <code class="docutils literal notranslate"><span class="pre">flake8</span></code> waren über viele Jahre sehr verbreitet in der Python Community und laufen im Hintergrund in vielen Python-Bibliotheken. Hier konzentrieren wir uns aber auf die zwei etwas neueren Linter <code class="docutils literal notranslate"><span class="pre">ruff</span></code> und <code class="docutils literal notranslate"><span class="pre">black</span></code> die zunehmend Einzug halten und vielen Entwickler*innen als moderner und leistungsfähiger gelten.</p>
<p><strong>Code Beispiel</strong></p>
<p>Um die Linter zu testen, nehmen wir das folgende (nonsense) Code Beispiel:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">magic_numbers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">1</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">5</span><span class="p">,</span>
    <span class="mi">6</span><span class="p">,</span>
    <span class="mi">7</span><span class="p">,</span>
    <span class="mi">8</span>
<span class="p">]</span>
<span class="n">magic_dictionary</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span><span class="s2">&quot;e&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">:</span><span class="s2">&quot;f&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span><span class="s2">&quot;f&quot;</span><span class="p">,</span><span class="mi">7</span><span class="p">:</span><span class="s2">&quot;g&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">:</span><span class="s2">&quot;h&quot;</span><span class="p">,</span><span class="mi">9</span><span class="p">:</span><span class="s2">&quot;i&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">:</span><span class="s2">&quot;j&quot;</span><span class="p">,</span><span class="mi">11</span><span class="p">:</span><span class="s2">&quot;k&quot;</span><span class="p">,</span><span class="mi">12</span><span class="p">:</span><span class="s2">&quot;l&quot;</span><span class="p">}</span>

<span class="k">def</span> <span class="nf">PowerCompute</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="n">number1</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="n">b</span>
    <span class="n">number2</span><span class="o">=</span><span class="n">b</span><span class="o">**</span><span class="n">a</span>
    <span class="n">max_number</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">number1</span><span class="p">,</span><span class="n">number2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">max_number</span><span class="o">&lt;</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">magic_numbers</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">magic_dictionary</span><span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">magic_numbers</span><span class="p">)])</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">magic_numbers</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">max_number</span>
    <span class="k">return</span> <span class="mi">11</span>

<span class="k">class</span> <span class="nc">power_computer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">11</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">12</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="mi">13</span>

    <span class="k">def</span> <span class="nf">computeSomething</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">PowerCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">))</span>

<span class="c1">#Run code for testing</span>
<span class="n">MyComputer</span> <span class="o">=</span> <span class="n">power_computer</span><span class="p">()</span>
<span class="n">MyComputer</span><span class="o">.</span><span class="n">computeSomething</span><span class="p">()</span>
</pre></div>
</div>
<section id="ruff">
<h2><span class="section-number">6.1. </span>Ruff<a class="headerlink" href="#ruff" title="Link to this heading">#</a></h2>
<p>Ruff ist ein äußerst schneller Python-Linter und Code-Formatter, der sich zunehmender Beliebtheit erfreut. Er hilft uns dabei sauberen, wartbaren und fehlerfreien Code zu schreiben.</p>
<section id="installation-von-ruff">
<h3><span class="section-number">6.1.1. </span>Installation von Ruff<a class="headerlink" href="#installation-von-ruff" title="Link to this heading">#</a></h3>
<p>Die Installation von Ruff ist unkompliziert, und das Tool funktioniert „out of the box“, ohne dass komplizierte Konfigurationen erforderlich sind. Hier sind die wichtigsten Installationsmethoden für verschiedene Systeme:</p>
<ul class="simple">
<li><p>Mit <strong>Pip</strong> (Standard für Python-Projekte):</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>ruff
</pre></div>
</div>
<ul class="simple">
<li><p>Oder mit <strong>Conda</strong>:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>ruff
</pre></div>
</div>
</section>
<section id="linting-mit-ruff">
<h3><span class="section-number">6.1.2. </span>Linting mit Ruff<a class="headerlink" href="#linting-mit-ruff" title="Link to this heading">#</a></h3>
<p>Ruff ermöglicht es dir, deinen Python-Code schnell auf Fehler und Inkonsistenzen zu überprüfen. Während Linting zwar keine Bugs garantiert entdeckt, hilft es dir dabei, stilistische Probleme und potenzielle Fehler im Code zu identifizieren.</p>
<p>Mit dem folgenden Befehl überprüft Ruff alle Code-Dateien im aktuellen Ordner</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ruff<span class="w"> </span>check
</pre></div>
</div>
<p>Es könnnen auch nur einzelne Dateien oder Ordner überprüft werden. In unserem Fall z.B. nur der oben angezeigte Code (nehmen wir mal an dieser befindet sich in der Datei <code class="docutils literal notranslate"><span class="pre">code_example_for_linting.py</span></code>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ruff<span class="w"> </span>check<span class="w"> </span>code_example_for_linting.py
</pre></div>
</div>
<p>Daraufhin gibt uns Ruff eine umfangreiche Meldung zurück (hier das Ergebnis mit Ruff in der Version 0.6.7):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>code_for_linting.py:1:8:<span class="w"> </span>F401<span class="w"> </span><span class="o">[</span>*<span class="o">]</span><span class="w"> </span><span class="sb">`</span>os<span class="sb">`</span><span class="w"> </span>imported<span class="w"> </span>but<span class="w"> </span>unused
<span class="w">  </span><span class="p">|</span>
<span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>import<span class="w"> </span>os
<span class="w">  </span><span class="p">|</span><span class="w">        </span>^^<span class="w"> </span>F401
<span class="m">2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>import<span class="w"> </span>numpy<span class="w"> </span>as<span class="w"> </span>np
<span class="w">  </span><span class="p">|</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>help:<span class="w"> </span>Remove<span class="w"> </span>unused<span class="w"> </span>import:<span class="w"> </span><span class="sb">`</span>os<span class="sb">`</span>

code_for_linting.py:14:55:<span class="w"> </span>F601<span class="w"> </span>Dictionary<span class="w"> </span>key<span class="w"> </span>literal<span class="w"> </span><span class="sb">`</span><span class="m">5</span><span class="sb">`</span><span class="w"> </span>repeated
<span class="w">   </span><span class="p">|</span>
<span class="m">12</span><span class="w"> </span><span class="p">|</span><span class="w">     </span><span class="m">8</span>
<span class="m">13</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="o">]</span>
<span class="m">14</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">magic_dictionary</span><span class="o">={</span><span class="m">1</span>:<span class="s2">&quot;a&quot;</span>,2:<span class="s2">&quot;b&quot;</span>,3:<span class="s2">&quot;c&quot;</span>,4:<span class="s2">&quot;d&quot;</span>,5:<span class="s2">&quot;e&quot;</span>,6:<span class="s2">&quot;f&quot;</span>,5:<span class="s2">&quot;f&quot;</span>,7:<span class="s2">&quot;g&quot;</span>,8:<span class="s2">&quot;h&quot;</span>,9:<span class="s2">&quot;i&quot;</span>,10:<span class="s2">&quot;j&quot;</span>,11:<span class="s2">&quot;k&quot;</span>,12:<span class="s2">&quot;l&quot;</span><span class="o">}</span>
<span class="w">   </span><span class="p">|</span><span class="w">                                                       </span>^<span class="w"> </span>F601
<span class="m">15</span><span class="w"> </span><span class="p">|</span>
<span class="m">16</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>def<span class="w"> </span>PowerCompute<span class="o">(</span>a,<span class="w"> </span>b,<span class="w"> </span>c<span class="o">)</span>:
<span class="w">   </span><span class="p">|</span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span>help:<span class="w"> </span>Remove<span class="w"> </span>repeated<span class="w"> </span>key<span class="w"> </span>literal<span class="w"> </span><span class="sb">`</span><span class="m">5</span><span class="sb">`</span>

Found<span class="w"> </span><span class="m">2</span><span class="w"> </span>errors.
<span class="o">[</span>*<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>fixable<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span><span class="sb">`</span>--fix<span class="sb">`</span><span class="w"> </span>option.
</pre></div>
</div>
<p>In diesem Beispiel findet Ruff zwei Fehler und sagt das einer davon automatisch behoben werden kann und zwar mit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ruff<span class="w"> </span>check<span class="w"> </span>--fix<span class="w"> </span>code_example_for_linting.py
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Achtung!</strong> Wenn ihr <code class="docutils literal notranslate"><span class="pre">ruff</span></code> mit der Option <code class="docutils literal notranslate"><span class="pre">--fix</span></code> (oder, wie wir gleich sehen werden: <code class="docutils literal notranslate"><span class="pre">--format</span></code>) ausführt, werden direkt eure Dateien entsprechend angepasst. Das kann sehr praktisch sein, ist aber oft gar nicht direkt gewünscht. Wenn ihr also nur “testen” wollt, ob der Code die Linter-Regeln einhält dann sollte Ruff erst ohne diese Optionen ausgeführt werden.</p>
</div>
</section>
<section id="welche-regeln-soll-ruff-uberprufen">
<h3><span class="section-number">6.1.3. </span>Welche Regeln soll Ruff überprüfen?<a class="headerlink" href="#welche-regeln-soll-ruff-uberprufen" title="Link to this heading">#</a></h3>
<p>In dem Fall den wir gerade gesehen haben wurde Ruff mit den Standardeinstellungen verwendet. Hier wird erstmal nur auf gröbere Fehler geachtet.
Mit Ruff lassen sich aber sehr viele etablierte Regeln im Bezug auf Code Style überprüfen.</p>
<p>Es können z.B. einzelne Regeln ausgewählt werden über <code class="docutils literal notranslate"><span class="pre">rule</span></code>, eine Übersicht der mehr als 800 Möglichkeiten <a class="reference external" href="https://docs.astral.sh/ruff/rules/">findet ihr hier</a>.</p>
<p>Falls du mehr über einen bestimmten Fehler wissen möchtest, kannst du den Fehlercode mit dem Befehl <code class="docutils literal notranslate"><span class="pre">ruff</span> <span class="pre">rule</span></code> näher untersuchen. Zum Beispiel:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ruff<span class="w"> </span>check<span class="w"> </span>code_example_for_linting.py<span class="w"> </span>--select<span class="w"> </span>F601
</pre></div>
</div>
<p>In den meisten Fällen interessiert uns aber nicht nur eine einzige Regel sondern wir möchten viele gleichzeitig testen. Dafür können auch ganze in der <a class="reference external" href="https://docs.astral.sh/ruff/rules/">Ruff Dokumentation der <code class="docutils literal notranslate"><span class="pre">Rules</span></code></a> angegebene Gruppen genutzt werden, z.B.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ruff<span class="w"> </span>check<span class="w"> </span>code_example_for_linting.py<span class="w"> </span>--select<span class="w"> </span>F
</pre></div>
</div>
<p>Das nutzt dann die “Pyflakes” Regeln. Oder für den “pydocstyle”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ruff<span class="w"> </span>check<span class="w"> </span>code_example_for_linting.py<span class="w"> </span>--select<span class="w"> </span>D
</pre></div>
</div>
<p>Auch möglich wäre sogar <code class="docutils literal notranslate"><span class="pre">ALL</span></code> um alle Regeln auszuwählen:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ruff<span class="w"> </span>check<span class="w"> </span>code_example_for_linting.py<span class="w"> </span>--select<span class="w"> </span>ALL
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Am besten an dieser Stelle einfach mal selbst die hier angegebenen Optionen (bzw. gerne auch noch weitere) ausprobieren um ein Gefühl dafür zu bekommen wie unterschiedlich das Feedback des Ruff-Linters ausfällt.</p>
</div>
</section>
<section id="konfiguration-von-ruff">
<h3><span class="section-number">6.1.4. </span>Konfiguration von Ruff<a class="headerlink" href="#konfiguration-von-ruff" title="Link to this heading">#</a></h3>
<p>Bei größeren Python-Softwareprojekten macht es oft sogar Sinn, die für das Projekt verbindlichen Regeln einmal gemeinsam festzulegen. Diese können dann für Ruff in einer Konfigurationsdatei hinterlegt werden. Die Konfigurationsdatei kann entweder <code class="docutils literal notranslate"><span class="pre">ruff.toml</span></code>, <code class="docutils literal notranslate"><span class="pre">.ruff.toml</span></code> oder <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> heißen. Hier ein einfaches Beispiel für eine <code class="docutils literal notranslate"><span class="pre">ruff.toml</span></code>-Datei:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">120</span>

<span class="k">[lint]</span>
<span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;E501&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;I&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Mit dieser Konfiguration wird Ruff auf eine maximale Zeilenlänge von 120 Zeichen prüfen und spezifische Regeln für Importe (I-Regeln) und Zeilenlängen (E501) anwenden.
Wenn die entsprechende <code class="docutils literal notranslate"><span class="pre">.toml</span></code> im selben Ordner oder einem der Unterordner liegt, wird Ruff dies erkennen und die entsprechenden Einstellungen übernehmen wenn wir <code class="docutils literal notranslate"><span class="pre">ruff</span> <span class="pre">check</span></code> ausführen.</p>
</section>
<section id="ruff-als-formatter">
<h3><span class="section-number">6.1.5. </span>Ruff als Formatter<a class="headerlink" href="#ruff-als-formatter" title="Link to this heading">#</a></h3>
<p>Ruff ist ein sehr schneller und umfangreicher <strong>Linter</strong> und kann uns sehr gut dabei unterstützen bestimmte Code Styles konsistent in unseren Projekten umzusetzen. Wir haben schon gesehen, dass gröbere Fehler bereits mit <code class="docutils literal notranslate"><span class="pre">--fix</span></code> behoben werden können. Alle anderen Hinweise, typischerweise zu Aussehen und Formatierung des Codes, werden nur als Text-Feedback zurückgegeben.</p>
<p>Es ist allerdings auch möglich Ruff zusätzlich als <strong>Formatter</strong> einzusetzen, d.h. als ein Tool das automatisiert bestimmte Formatierungsregeln umsetzt so dass wir dies nicht mehr manuel machen müssen.
Wir vorhin schon gewarnt, bedeutet dies aber auch, dass Ruff direkt unsere Dateien entsprechend verändert.</p>
<p>Die Formatierungsoption können wir nutzen über</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ruff<span class="w"> </span>format
</pre></div>
</div>
</section>
<section id="weitere-informationen-zu-ruff">
<h3><span class="section-number">6.1.6. </span>Weitere Informationen zu <code class="docutils literal notranslate"><span class="pre">ruff</span></code><a class="headerlink" href="#weitere-informationen-zu-ruff" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://realpython.com/ruff-python/">Real Python Tutorial</a></p></li>
<li><p><a class="reference external" href="https://docs.astral.sh/ruff/tutorial/">Ruff Tutorial</a></p></li>
</ul>
</section>
</section>
<section id="black">
<h2><span class="section-number">6.2. </span>Black<a class="headerlink" href="#black" title="Link to this heading">#</a></h2>
<p>Genau wir Ruff (aber anders als Pylint und Flake8) ist <code class="docutils literal notranslate"><span class="pre">Black</span></code> nicht nur ein Linter, sondern auch ein Code-Formatter. Anstatt nur stilistische Probleme und Fehler im Code zu melden, formatiert Black den Code automatisch gemäß seinem eigenen Stil, der eng an PEP 8 angelehnt ist.</p>
<p><strong>Hauptmerkmale:</strong></p>
<ul class="simple">
<li><p>Automatische Codeformatierung.</p></li>
<li><p>Hat eine strikte und unveränderliche Stilrichtlinie, die es “The Blackened” nennt.</p></li>
</ul>
<p><strong>Vorteile:</strong></p>
<ul class="simple">
<li><p>Keine Entscheidungen bezüglich des Stils: Black entscheidet für euch.</p></li>
<li><p>Spart Zeit, da keine Diskussionen über Codierungsstil mehr erforderlich sind.</p></li>
<li><p>Sehr schnell und kann leicht in CI-Workflows integriert werden.</p></li>
</ul>
<p><strong>Nachteile:</strong></p>
<ul class="simple">
<li><p>Macht keine Kompromisse: Black macht keine Ausnahmen und dies kann für manche Teams zu streng sein.</p></li>
<li><p>Kann nicht angepasst werden, um bestimmte Stilpräferenzen zu berücksichtigen.</p></li>
<li><p>Ersetzt oft nicht ausreichend ein strengeres Linting (wie z.B. von <code class="docutils literal notranslate"><span class="pre">pylint</span></code> oder <code class="docutils literal notranslate"><span class="pre">ruff</span></code>)</p></li>
</ul>
<section id="anwendung">
<h3><span class="section-number">6.2.1. </span>Anwendung<a class="headerlink" href="#anwendung" title="Link to this heading">#</a></h3>
<p>Zuerst soll <code class="docutils literal notranslate"><span class="pre">black</span></code> als <em>Linter</em> eingesetzt werden.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>black<span class="w"> </span>code_example_for_linting.py<span class="w"> </span>--check
</pre></div>
</div>
<p>Die Ausgabe die wir bekommen ist aber noch nicht sehr informativ. Darum besser:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>black<span class="w"> </span>code_example_for_linting.py<span class="w"> </span>--check<span class="w"> </span>--diff
</pre></div>
</div>
<p>Als nächstes einmal ausprobieren wie <code class="docutils literal notranslate"><span class="pre">black</span></code> als <em>Formatter</em> funktioniert (was eigentlich auch der Standard-Modus von <code class="docutils literal notranslate"><span class="pre">black</span></code> ist). Um die Datei nicht zu überschreiben, bitte einmal vorher die Datei kopieren und umbenennen (z.B. in bash mit <code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">code_example_for_linting.py</span> <span class="pre">code_example_before_black.py</span></code>).</p>
<p>Dann</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>black<span class="w"> </span>code_example_before_black.py
</pre></div>
</div>
</section>
<section id="mehr-informationen-zu-black">
<h3><span class="section-number">6.2.2. </span>Mehr Informationen zu <code class="docutils literal notranslate"><span class="pre">black</span></code><a class="headerlink" href="#mehr-informationen-zu-black" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>https://black.readthedocs.io/en/stable/index.html</p></li>
<li><p>https://calmcode.io/black/introduction.html</p></li>
</ul>
</section>
</section>
<section id="ausblick-weitere-quellen">
<h2><span class="section-number">6.3. </span>Ausblick &amp; Weitere Quellen<a class="headerlink" href="#ausblick-weitere-quellen" title="Link to this heading">#</a></h2>
<p>Es gibt noch viele weitere Linter, sowie auch umfangreichere Tools um automatisiert die Code Qualität zu überprüfen bzw. zu verbessern. Zwei erwähnenswerte:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mypy</span></code> wird genutzt um die korrekte/konsistente Verwendung von Datentypen zu überprüfen</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SonarCloud</span></code> ist ein <strong>sehr</strong> umfangreiches Tool um Code zu beurteilen und potentielle Schachstellen aufzudecken.</p></li>
</ul>
<p>Wir haben hier die sehr verbreiteten Linter <code class="docutils literal notranslate"><span class="pre">pylint</span></code> und <code class="docutils literal notranslate"><span class="pre">flake8</span></code> ausgelassen. Zu beiden gibt es aber zum Glück online viele Tutorials.
Zum Beispiel:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://flake8.pycqa.org/en/latest/">Flake8 Dokumentation</a></p></li>
<li><p><a class="reference external" href="https://calmcode.io/flake8/introduction.html">Calmcode Tutorial</a></p></li>
<li><p><a class="reference external" href="https://docs.pylint.org/tutorial.html">Pylint Dokumentation</a></p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./book"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="05_clean_code.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">5. </span>Cleaner Code, Better Code</p>
      </div>
    </a>
    <a class="right-next"
       href="06_code_smells.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">7. </span>Code Smells</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ruff">6.1. Ruff</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-von-ruff">6.1.1. Installation von Ruff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linting-mit-ruff">6.1.2. Linting mit Ruff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#welche-regeln-soll-ruff-uberprufen">6.1.3. Welche Regeln soll Ruff überprüfen?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#konfiguration-von-ruff">6.1.4. Konfiguration von Ruff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ruff-als-formatter">6.1.5. Ruff als Formatter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#weitere-informationen-zu-ruff">6.1.6. Weitere Informationen zu <code class="docutils literal notranslate"><span class="pre">ruff</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#black">6.2. Black</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#anwendung">6.2.1. Anwendung</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mehr-informationen-zu-black">6.2.2. Mehr Informationen zu <code class="docutils literal notranslate"><span class="pre">black</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ausblick-weitere-quellen">6.3. Ausblick &amp; Weitere Quellen</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Florian Huber
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>